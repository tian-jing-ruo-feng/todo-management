<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>统一工作流与团队协作管理系统</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        :root {
            --primary-color: #2563eb;
            --primary-light: #dbeafe;
            --secondary-color: #475569;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --info-color: #3b82f6;
            --purple-color: #8b5cf6;
            --pink-color: #ec4899;
            --bg-color: #f8fafc;
            --card-color: #ffffff;
            --border-color: #e2e8f0;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --node-start: #10b981;
            --node-end: #ef4444;
            --node-user: #3b82f6;
            --node-auto: #8b5cf6;
            --node-gateway: #f59e0b;
            --node-subprocess: #ec4899;
            --online-color: #10b981;
            --away-color: #f59e0b;
            --offline-color: #94a3b8;
            --busy-color: #ef4444;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* 顶部导航 */
        .top-navigation {
            background-color: var(--card-color);
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 0 20px;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
            position: sticky;
            top: 20px;
            z-index: 100;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .logo i {
            font-size: 1.8rem;
        }
        
        .logo-text {
            display: flex;
            flex-direction: column;
        }
        
        .logo-subtitle {
            font-size: 0.85rem;
            font-weight: normal;
            color: var(--text-secondary);
        }
        
        /* 主标签导航 */
        .main-tabs {
            display: flex;
            gap: 5px;
        }
        
        .main-tab {
            padding: 12px 24px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 500;
            color: var(--text-secondary);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .main-tab:hover {
            color: var(--primary-color);
            background-color: #f8fafc;
        }
        
        .main-tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
            background-color: var(--primary-light);
        }
        
        .tab-badge {
            background-color: var(--danger-color);
            color: white;
            border-radius: 10px;
            font-size: 0.7rem;
            padding: 2px 6px;
            min-width: 18px;
            text-align: center;
        }
        
        /* 用户信息 */
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            position: relative;
        }
        
        .user-status {
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            border: 2px solid white;
        }
        
        .status-online {
            background-color: var(--online-color);
        }
        
        .status-away {
            background-color: var(--away-color);
        }
        
        .user-details {
            display: flex;
            flex-direction: column;
        }
        
        .user-name {
            font-weight: 600;
        }
        
        .user-role {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        /* 内容区域 */
        .content-area {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .content-area.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* 工作台样式 */
        .notification-bar {
            background-color: #fffbeb;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .notification-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .notification-icon {
            color: #f59e0b;
            font-size: 1.2rem;
        }
        
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .quick-action-card {
            background-color: var(--card-color);
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .quick-action-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }
        
        .quick-action-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }
        
        .quick-action-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .quick-action-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        /* 通用卡片样式 */
        .card {
            background-color: var(--card-color);
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* KPI指标卡片 */
        .kpi-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .kpi-card {
            background-color: var(--card-color);
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .kpi-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .kpi-title {
            font-size: 0.95rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .kpi-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .icon-primary {
            background-color: #dbeafe;
            color: var(--primary-color);
        }
        
        .icon-success {
            background-color: #d1fae5;
            color: var(--success-color);
        }
        
        .icon-warning {
            background-color: #fef3c7;
            color: var(--warning-color);
        }
        
        .icon-danger {
            background-color: #fee2e2;
            color: var(--danger-color);
        }
        
        .kpi-value {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        /* 图表容器 */
        .chart-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .chart-wrapper {
            position: relative;
            height: 300px;
        }
        
        /* 表格样式 */
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .data-table th {
            text-align: left;
            padding: 15px;
            background-color: #f8fafc;
            border-bottom: 2px solid var(--border-color);
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .data-table td {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .data-table tbody tr:hover {
            background-color: #f8fafc;
        }
        
        /* 待办任务管理样式 */
        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background-color: var(--card-color);
            padding: 20px;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }
        
        .category-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .category-title i {
            color: var(--primary-color);
        }
        
        .stats {
            display: flex;
            gap: 20px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        /* 视图选择器 */
        .view-selector {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            background-color: var(--card-color);
            padding: 12px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            flex-wrap: wrap;
        }
        
        .view-btn {
            padding: 8px 16px;
            background: none;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            color: var(--text-secondary);
            transition: all 0.2s;
        }
        
        .view-btn:hover {
            background-color: #f1f5f9;
        }
        
        .view-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        /* 工具栏 */
        .toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .filter-dropdown {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: white;
            color: var(--text-primary);
            cursor: pointer;
            min-width: 120px;
        }
        
        .search-box {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            width: 250px;
        }
        
        .actions {
            display: flex;
            gap: 10px;
        }
        
        /* 按钮样式 */
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #1d4ed8;
        }
        
        .btn-secondary {
            background-color: #e2e8f0;
            color: var(--text-primary);
        }
        
        .btn-secondary:hover {
            background-color: #cbd5e1;
        }
        
        .btn-success {
            background-color: var(--success-color);
            color: white;
        }
        
        .btn-success:hover {
            background-color: #0da271;
        }
        
        /* 优先级视图样式 */
        .priority-table {
            width: 100%;
            border-collapse: collapse;
            background-color: var(--card-color);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }
        
        .priority-table th {
            text-align: left;
            padding: 15px;
            background-color: #f8fafc;
            border-bottom: 2px solid var(--border-color);
            color: var(--text-secondary);
            font-weight: 600;
        }
        
        .priority-table td {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .priority-table tr:hover {
            background-color: #f8fafc;
        }
        
        .priority-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .priority-p0 {
            background-color: #fee2e2;
            color: #b91c1c;
        }
        
        .priority-p1 {
            background-color: #fef3c7;
            color: #b45309;
        }
        
        .priority-p2 {
            background-color: #dbeafe;
            color: #1e40af;
        }
        
        .priority-p3 {
            background-color: #e0e7ff;
            color: #3730a3;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .status-todo {
            background-color: #e2e8f0;
            color: #475569;
        }
        
        .status-inprogress {
            background-color: #dbeafe;
            color: #1e40af;
        }
        
        .status-review {
            background-color: #fef3c7;
            color: #b45309;
        }
        
        .status-done {
            background-color: #d1fae5;
            color: #065f46;
        }
        
        .sla-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-weight: 600;
        }
        
        .sla-critical {
            color: var(--danger-color);
        }
        
        .sla-warning {
            color: var(--warning-color);
        }
        
        .sla-normal {
            color: var(--success-color);
        }
        
        /* 看板视图样式 */
        .kanban-container {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .kanban-column {
            min-width: 280px;
            background-color: #f8fafc;
            border-radius: 10px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .kanban-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .kanban-title {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .kanban-count {
            background-color: #e2e8f0;
            color: var(--text-primary);
            border-radius: 12px;
            padding: 2px 10px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .kanban-card {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: var(--shadow);
            cursor: move;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .kanban-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .card-title {
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }
        
        .card-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }
        
        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        .card-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
        }
        
        /* 流程配置样式 */
        .designer-container {
            display: flex;
            height: 700px;
            background-color: var(--card-color);
            border-radius: 10px;
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 25px;
        }
        
        .sidebar {
            width: 280px;
            background-color: #f8fafc;
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        
        .sidebar-section {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .section-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .node-library {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        
        .node-item {
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            cursor: move;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        
        .node-item:hover {
            background-color: #e2e8f0;
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .node-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }
        
        .node-start .node-icon { background-color: var(--node-start); }
        .node-end .node-icon { background-color: var(--node-end); }
        .node-user .node-icon { background-color: var(--node-user); }
        .node-auto .node-icon { background-color: var(--node-auto); }
        .node-gateway .node-icon { background-color: var(--node-gateway); }
        .node-subprocess .node-icon { background-color: var(--node-subprocess); }
        
        .process-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .process-item {
            padding: 12px 15px;
            background-color: white;
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .process-item:hover {
            background-color: #e2e8f0;
        }
        
        .process-item.active {
            background-color: #dbeafe;
            border-left-color: var(--primary-color);
        }
        
        .designer-area {
            flex: 1;
            background-color: #f8fafc;
            background-image: 
                linear-gradient(rgba(0, 0, 0, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 0, 0, 0.05) 1px, transparent 1px);
            background-size: 20px 20px;
            overflow: auto;
            position: relative;
        }
        
        .designer-canvas {
            width: 2000px;
            height: 1500px;
            position: relative;
            padding: 50px;
        }
        
        .flow-node {
            position: absolute;
            width: 180px;
            cursor: move;
            transition: all 0.2s;
            z-index: 10;
        }
        
        .flow-node.selected {
            filter: drop-shadow(0 0 8px rgba(37, 99, 235, 0.4));
        }
        
        .node-content {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: var(--shadow);
            border: 2px solid transparent;
            transition: all 0.2s;
        }
        
        .flow-node.selected .node-content {
            border-color: var(--primary-color);
        }
        
        .properties-panel {
            width: 360px;
            background-color: #f8fafc;
            border-left: 1px solid var(--border-color);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .panel-content {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        /* 统计报表样式 */
        .chart-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .chart-card {
            background-color: var(--card-color);
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .chart-title {
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .leaderboard-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .leaderboard-card {
            background-color: var(--card-color);
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
        }
        
        /* 团队协作样式 */
        .team-collab-container {
            display: flex;
            gap: 20px;
            height: calc(100vh - 150px);
            min-height: 700px;
        }
        
        .left-panel {
            width: 320px;
            background-color: var(--card-color);
            border-radius: 10px;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .panel-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .panel-title {
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .panel-actions {
            display: flex;
            gap: 10px;
        }
        
        .panel-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        
        /* 团队成员列表 */
        .member-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .member-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 8px;
            transition: background-color 0.2s;
            cursor: pointer;
        }
        
        .member-item:hover {
            background-color: #f8fafc;
        }
        
        .member-item.active {
            background-color: var(--primary-light);
        }
        
        .member-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            position: relative;
        }
        
        .member-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        
        .member-name {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .member-role {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        /* 团队聊天 */
        .team-chat {
            flex: 1;
            background-color: var(--card-color);
            border-radius: 10px;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .message-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .message-item {
            display: flex;
            gap: 12px;
            max-width: 80%;
        }
        
        .message-item.own {
            align-self: flex-end;
            flex-direction: row-reverse;
        }
        
        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .message-bubble {
            background-color: #f1f5f9;
            padding: 12px 16px;
            border-radius: 18px;
            border-top-left-radius: 4px;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .message-item.own .message-bubble {
            background-color: var(--primary-color);
            color: white;
            border-top-left-radius: 18px;
            border-top-right-radius: 4px;
        }
        
        .chat-input-area {
            padding: 20px;
            border-top: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .chat-input-container {
            display: flex;
            gap: 10px;
        }
        
        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 0.95rem;
            resize: none;
            min-height: 60px;
            max-height: 120px;
        }
        
        .chat-send-btn {
            padding: 12px 24px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s;
        }
        
        /* 文件共享 */
        .file-sharing {
            background-color: var(--card-color);
            border-radius: 10px;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            height: 350px;
            overflow: hidden;
        }
        
        .file-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .file-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 8px;
            transition: background-color 0.2s;
            cursor: pointer;
        }
        
        .file-item:hover {
            background-color: #f8fafc;
        }
        
        .file-icon {
            width: 48px;
            height: 48px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            flex-shrink: 0;
        }
        
        .file-icon.pdf {
            background-color: #ef4444;
        }
        
        .file-icon.doc {
            background-color: #3b82f6;
        }
        
        .file-icon.xls {
            background-color: #10b981;
        }
        
        .file-icon.img {
            background-color: #8b5cf6;
        }
        
        /* 团队活动 */
        .team-activity {
            flex: 1;
            background-color: var(--card-color);
            border-radius: 10px;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .activity-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .activity-item {
            display: flex;
            gap: 12px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .activity-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }
        
        .activity-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        /* 模态框样式 */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            box-shadow: var(--shadow-lg);
        }
        
        /* 响应式设计 */
        @media (max-width: 1400px) {
            .kpi-container, .chart-container, .leaderboard-container {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .properties-panel {
                width: 320px;
            }
            
            .quick-actions {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 1200px) {
            .team-collab-container {
                flex-wrap: wrap;
                height: auto;
            }
            
            .left-panel, .right-panel {
                width: 100%;
                height: 400px;
            }
            
            .center-panel {
                width: 100%;
            }
        }
        
        @media (max-width: 992px) {
            .kpi-container, .chart-container, .leaderboard-container {
                grid-template-columns: 1fr;
            }
            
            .designer-container {
                flex-direction: column;
                height: 900px;
            }
            
            .sidebar, .properties-panel {
                width: 100%;
                height: 300px;
            }
            
            .kanban-column {
                min-width: 250px;
            }
            
            .top-navigation {
                flex-direction: column;
                height: auto;
                padding: 15px;
            }
            
            .main-tabs {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .main-tab {
                padding: 8px 16px;
            }
            
            .user-info {
                margin-top: 15px;
            }
            
            .toolbar {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .search-box {
                width: 100%;
            }
        }
        
        /* 工具提示 */
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 180px;
            background-color: #1e293b;
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            font-weight: normal;
        }
        
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        
        /* 空状态 */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            text-align: center;
            color: var(--text-secondary);
        }
        
        .empty-icon {
            font-size: 3rem;
            color: #cbd5e1;
            margin-bottom: 20px;
        }
        
        .empty-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .empty-desc {
            max-width: 300px;
            line-height: 1.5;
        }
        
        /* 进度条 */
        .progress-bar {
            height: 8px;
            background-color: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 4px;
        }
        
        .progress-high {
            background-color: var(--success-color);
        }
        
        .progress-medium {
            background-color: var(--warning-color);
        }
        
        .progress-low {
            background-color: var(--danger-color);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 顶部导航 -->
        <div class="top-navigation">
            <div class="logo">
                <i class="fas fa-tasks"></i>
                <div class="logo-text">
                    <span>统一工作流管理系统</span>
                    <span class="logo-subtitle">工作流、待办、统计、协作一体化</span>
                </div>
            </div>
            
            <div class="main-tabs">
                <button class="main-tab active" data-tab="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    工作台
                </button>
                <button class="main-tab" data-tab="tasks">
                    <i class="fas fa-list-check"></i>
                    待办任务
                    <span class="tab-badge">12</span>
                </button>
                <button class="main-tab" data-tab="process">
                    <i class="fas fa-sitemap"></i>
                    流程配置
                </button>
                <button class="main-tab" data-tab="reports">
                    <i class="fas fa-chart-line"></i>
                    统计报表
                </button>
                <button class="main-tab" data-tab="collaboration">
                    <i class="fas fa-users"></i>
                    团队协作
                    <span class="tab-badge">5</span>
                </button>
            </div>
            
            <div class="user-info">
                <div class="user-avatar">
                    张
                    <div class="user-status status-online"></div>
                </div>
                <div class="user-details">
                    <div class="user-name">张三</div>
                    <div class="user-role">系统管理员</div>
                </div>
            </div>
        </div>
        
        <!-- 工作台 -->
        <div id="dashboard-tab" class="content-area active">
            <div class="notification-bar">
                <div class="notification-content">
                    <i class="fas fa-info-circle notification-icon"></i>
                    <div>
                        <strong>系统通知：</strong> 您有 <strong>12个待办任务</strong>，其中 <strong>3个已超时</strong>。请及时处理！
                    </div>
                </div>
                <button class="btn btn-primary" style="padding: 8px 16px;">
                    <i class="fas fa-check"></i>
                    全部标记为已读
                </button>
            </div>
            
            <div class="quick-actions">
                <div class="quick-action-card" data-action="new-task">
                    <div class="quick-action-icon" style="background-color: #dbeafe; color: var(--primary-color);">
                        <i class="fas fa-plus"></i>
                    </div>
                    <div class="quick-action-title">新建任务</div>
                    <div class="quick-action-desc">创建新的待办任务</div>
                </div>
                
                <div class="quick-action-card" data-action="process-design">
                    <div class="quick-action-icon" style="background-color: #d1fae5; color: var(--success-color);">
                        <i class="fas fa-project-diagram"></i>
                    </div>
                    <div class="quick-action-title">设计流程</div>
                    <div class="quick-action-desc">创建或编辑工作流程</div>
                </div>
                
                <div class="quick-action-card" data-action="view-reports">
                    <div class="quick-action-icon" style="background-color: #fef3c7; color: var(--warning-color);">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div class="quick-action-title">查看报表</div>
                    <div class="quick-action-desc">分析工作流执行情况</div>
                </div>
                
                <div class="quick-action-card" data-action="team-collaboration">
                    <div class="quick-action-icon" style="background-color: #e0e7ff; color: var(--purple-color);">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="quick-action-title">团队协作</div>
                    <div class="quick-action-desc">查看团队任务分配</div>
                </div>
            </div>
            
            <div class="chart-container">
                <div class="chart-card">
                    <div class="chart-header">
                        <div class="chart-title">我的任务状态</div>
                        <button class="btn btn-secondary" style="padding: 6px 12px;">
                            <i class="fas fa-sync-alt"></i>
                            刷新
                        </button>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="myTasksChart"></canvas>
                    </div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-header">
                        <div class="chart-title">团队任务量趋势</div>
                        <div class="chart-actions">
                            <button class="btn btn-secondary" style="padding: 6px 12px;">
                                本周
                            </button>
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="teamTasksChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="kpi-container">
                <div class="kpi-card">
                    <div class="kpi-header">
                        <div class="kpi-title">我的待办任务</div>
                        <div class="kpi-icon icon-primary">
                            <i class="fas fa-tasks"></i>
                        </div>
                    </div>
                    <div class="kpi-value">12</div>
                    <div class="kpi-change" style="color: var(--danger-color);">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>3个已超时</span>
                    </div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-header">
                        <div class="kpi-title">本周完成任务</div>
                        <div class="kpi-icon icon-success">
                            <i class="fas fa-check-circle"></i>
                        </div>
                    </div>
                    <div class="kpi-value">28</div>
                    <div class="kpi-change" style="color: var(--success-color);">
                        <i class="fas fa-arrow-up"></i>
                        <span>比上周多5个</span>
                    </div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-header">
                        <div class="kpi-title">平均处理时间</div>
                        <div class="kpi-icon icon-warning">
                            <i class="fas fa-clock"></i>
                        </div>
                    </div>
                    <div class="kpi-value">4.2<span style="font-size: 1.2rem;">小时</span></div>
                    <div class="kpi-change" style="color: var(--success-color);">
                        <i class="fas fa-arrow-down"></i>
                        <span>比上周减少0.8小时</span>
                    </div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-header">
                        <div class="kpi-title">团队活跃流程</div>
                        <div class="kpi-icon icon-danger">
                            <i class="fas fa-sitemap"></i>
                        </div>
                    </div>
                    <div class="kpi-value">8</div>
                    <div class="kpi-change" style="color: var(--text-secondary);">
                        <i class="fas fa-info-circle"></i>
                        <span>共32个流程</span>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">我最近的待办任务</div>
                    <div class="table-actions">
                        <button class="btn btn-secondary">
                            <i class="fas fa-list"></i>
                            查看全部
                        </button>
                    </div>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>任务ID</th>
                            <th>标题</th>
                            <th>流程类型</th>
                            <th>优先级</th>
                            <th>截止时间</th>
                            <th>状态</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>#IT-2023-1026</td>
                            <td><strong>服务器宕机处理</strong></td>
                            <td><span class="process-badge" style="background-color:#e0e7ff; color:#3730a3;">IT服务</span></td>
                            <td><span class="priority-badge priority-p0">P0 紧急</span></td>
                            <td>今天 10:30</td>
                            <td><span class="status-badge status-inprogress">处理中</span></td>
                            <td>
                                <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 0.8rem;">
                                    <i class="fas fa-play"></i>
                                    处理
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>#LEAVE-2023-1025</td>
                            <td><strong>李四的请假审批</strong></td>
                            <td><span class="process-badge" style="background-color:#dbeafe; color:#1e40af;">请假审批</span></td>
                            <td><span class="priority-badge priority-p1">P1 高</span></td>
                            <td>今天</td>
                            <td><span class="status-badge status-todo">待处理</span></td>
                            <td>
                                <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 0.8rem;">
                                    <i class="fas fa-play"></i>
                                    处理
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>#EXPENSE-2023-1025</td>
                            <td><strong>孙七的费用报销审批</strong></td>
                            <td><span class="process-badge" style="background-color:#d1fae5; color:#065f46;">费用报销</span></td>
                            <td><span class="priority-badge priority-p2">P2 中</span></td>
                            <td>明天</td>
                            <td><span class="status-badge status-todo">待处理</span></td>
                            <td>
                                <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 0.8rem;">
                                    <i class="fas fa-play"></i>
                                    处理
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- 待办任务管理 -->
        <div id="tasks-tab" class="content-area">
            <div class="category-header">
                <div class="category-title">
                    <i class="fas fa-server"></i>
                    IT故障单管理
                </div>
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value">12</div>
                        <div class="stat-label">总任务数</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">3</div>
                        <div class="stat-label">待处理</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">1</div>
                        <div class="stat-label">已超时</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">4.2h</div>
                        <div class="stat-label">平均处理</div>
                    </div>
                </div>
            </div>
            
            <div class="view-selector">
                <button class="view-btn active" data-view="priority">
                    <i class="fas fa-sort-amount-down"></i>
                    优先级视图
                </button>
                <button class="view-btn" data-view="kanban">
                    <i class="fas fa-columns"></i>
                    看板视图
                </button>
                <button class="view-btn" data-view="timeline">
                    <i class="fas fa-calendar-alt"></i>
                    时间视图
                </button>
                <button class="view-btn" data-view="assignee">
                    <i class="fas fa-users"></i>
                    负责人视图
                </button>
            </div>
            
            <div class="toolbar">
                <div class="filters">
                    <select class="filter-dropdown">
                        <option>优先级: 全部</option>
                        <option>P0 - 紧急</option>
                        <option>P1 - 高</option>
                        <option>P2 - 中</option>
                        <option>P3 - 低</option>
                    </select>
                    <select class="filter-dropdown">
                        <option>状态: 全部</option>
                        <option>待处理</option>
                        <option>处理中</option>
                        <option>待审核</option>
                        <option>已完成</option>
                    </select>
                    <select class="filter-dropdown">
                        <option>负责人: 全部</option>
                        <option>我</option>
                        <option>张三</option>
                        <option>李四</option>
                        <option>王五</option>
                    </select>
                    <select class="filter-dropdown">
                        <option>类型: 全部</option>
                        <option>硬件故障</option>
                        <option>软件故障</option>
                        <option>网络问题</option>
                        <option>安全事件</option>
                    </select>
                    <input type="text" class="search-box" placeholder="搜索任务或ID...">
                </div>
                <div class="actions">
                    <button class="btn btn-secondary">
                        <i class="fas fa-download"></i>
                        导出
                    </button>
                    <button class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        新建任务
                    </button>
                </div>
            </div>
            
            <!-- 优先级视图 -->
            <div id="priority-view" class="content-area active">
                <table class="priority-table">
                    <thead>
                        <tr>
                            <th style="width: 5%;"></th>
                            <th style="width: 15%;">优先级</th>
                            <th style="width: 30%;">标题</th>
                            <th style="width: 15%;">截止时间</th>
                            <th style="width: 10%;">负责人</th>
                            <th style="width: 10%;">状态</th>
                            <th style="width: 15%;">SLA剩余</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="task-row" data-task-id="1">
                            <td><input type="checkbox"></td>
                            <td><span class="priority-badge priority-p0">P0 紧急</span></td>
                            <td><strong>服务器宕机 - 主数据库服务器无响应</strong><br><span style="font-size: 0.9rem; color: var(--text-secondary);">影响: 全公司网络中断</span></td>
                            <td>10:30<br><span style="font-size: 0.85rem; color: var(--danger-color);">今天</span></td>
                            <td><div class="card-avatar">张</div></td>
                            <td><span class="status-badge status-inprogress">处理中</span></td>
                            <td><span class="sla-indicator sla-critical"><i class="fas fa-clock"></i> 0:45</span></td>
                        </tr>
                        <tr class="task-row" data-task-id="2">
                            <td><input type="checkbox"></td>
                            <td><span class="priority-badge priority-p1">P1 高</span></td>
                            <td><strong>财务系统卡顿，月末结账受阻</strong><br><span style="font-size: 0.9rem; color: var(--text-secondary);">影响: 财务部门月末结账</span></td>
                            <td>今天<br><span style="font-size: 0.85rem; color: var(--warning-color);">全天</span></td>
                            <td><div class="card-avatar">李</div></td>
                            <td><span class="status-badge status-todo">待处理</span></td>
                            <td><span class="sla-indicator sla-warning"><i class="fas fa-clock"></i> 3:20</span></td>
                        </tr>
                        <tr class="task-row" data-task-id="3">
                            <td><input type="checkbox"></td>
                            <td><span class="priority-badge priority-p2">P2 中</span></td>
                            <td><strong>VPN连接缓慢，影响远程办公</strong><br><span style="font-size: 0.9rem; color: var(--text-secondary);">影响: 30%远程办公员工</span></td>
                            <td>明天<br><span style="font-size: 0.85rem; color: var(--text-secondary);">全天</span></td>
                            <td><div class="card-avatar">王</div></td>
                            <td><span class="status-badge status-todo">待处理</span></td>
                            <td><span class="sla-indicator sla-normal"><i class="fas fa-clock"></i> 1天</span></td>
                        </tr>
                        <tr class="task-row" data-task-id="4">
                            <td><input type="checkbox"></td>
                            <td><span class="priority-badge priority-p2">P2 中</span></td>
                            <td><strong>3楼公共打印机频繁卡纸</strong><br><span style="font-size: 0.9rem; color: var(--text-secondary);">影响: 行政部、市场部日常打印</span></td>
                            <td>周四<br><span style="font-size: 0.85rem; color: var(--text-secondary);">15:00</span></td>
                            <td><div class="card-avatar">赵</div></td>
                            <td><span class="status-badge status-review">待审核</span></td>
                            <td><span class="sla-indicator sla-normal"><i class="fas fa-clock"></i> 2天</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- 看板视图 -->
            <div id="kanban-view" class="content-area">
                <div class="kanban-container" id="kanban-container">
                    <div class="kanban-column" data-status="todo">
                        <div class="kanban-header">
                            <div class="kanban-title">待处理</div>
                            <div class="kanban-count">5</div>
                        </div>
                        <div class="kanban-card" draggable="true" data-task-id="2">
                            <div class="card-title">
                                <span>财务系统卡顿</span>
                                <span class="priority-badge priority-p1">P1</span>
                            </div>
                            <div class="card-description">月末结账期间系统响应缓慢</div>
                            <div class="card-footer">
                                <div>今天</div>
                                <div class="card-avatar">李</div>
                            </div>
                        </div>
                        <div class="kanban-card" draggable="true" data-task-id="3">
                            <div class="card-title">
                                <span>VPN连接缓慢</span>
                                <span class="priority-badge priority-p2">P2</span>
                            </div>
                            <div class="card-description">远程办公员工反馈VPN连接速度慢</div>
                            <div class="card-footer">
                                <div>明天</div>
                                <div class="card-avatar">王</div>
                            </div>
                        </div>
                        <button class="add-card-btn">
                            <i class="fas fa-plus"></i>
                            添加任务
                        </button>
                    </div>
                    
                    <div class="kanban-column" data-status="inprogress">
                        <div class="kanban-header">
                            <div class="kanban-title">处理中</div>
                            <div class="kanban-count">4</div>
                        </div>
                        <div class="kanban-card" draggable="true" data-task-id="1">
                            <div class="card-title">
                                <span>服务器宕机</span>
                                <span class="priority-badge priority-p0">P0</span>
                            </div>
                            <div class="card-description">主数据库服务器无响应</div>
                            <div class="card-footer">
                                <div class="sla-indicator sla-critical">0:45</div>
                                <div class="card-avatar">张</div>
                            </div>
                        </div>
                        <button class="add-card-btn">
                            <i class="fas fa-plus"></i>
                            添加任务
                        </button>
                    </div>
                    
                    <div class="kanban-column" data-status="review">
                        <div class="kanban-header">
                            <div class="kanban-title">待审核</div>
                            <div class="kanban-count">2</div>
                        </div>
                        <div class="kanban-card" draggable="true" data-task-id="4">
                            <div class="card-title">
                                <span>3楼打印机维护</span>
                                <span class="priority-badge priority-p2">P2</span>
                            </div>
                            <div class="card-description">公共打印机频繁卡纸问题已处理</div>
                            <div class="card-footer">
                                <div>周四 15:00</div>
                                <div class="card-avatar">赵</div>
                            </div>
                        </div>
                        <button class="add-card-btn">
                            <i class="fas fa-plus"></i>
                            添加任务
                        </button>
                    </div>
                    
                    <div class="kanban-column" data-status="done">
                        <div class="kanban-header">
                            <div class="kanban-title">已完成</div>
                            <div class="kanban-count">1</div>
                        </div>
                        <div class="kanban-card" draggable="true" data-task-id="9">
                            <div class="card-title">
                                <span>软件安装请求</span>
                                <span class="priority-badge priority-p3">P3</span>
                            </div>
                            <div class="card-description">为设计部安装Adobe软件</div>
                            <div class="card-footer">
                                <div>已完成</div>
                                <div class="card-avatar">赵</div>
                            </div>
                        </div>
                        <button class="add-card-btn">
                            <i class="fas fa-plus"></i>
                            添加任务
                        </button>
                    </div>
                </div>
                <div style="margin-top: 20px; font-size: 0.9rem; color: var(--text-secondary); text-align: center;">
                    <i class="fas fa-info-circle"></i> 提示：您可以拖拽任务卡片到不同状态列来更新任务状态
                </div>
            </div>
        </div>
        
        <!-- 流程配置 -->
        <div id="process-tab" class="content-area">
            <div class="category-header">
                <div class="category-title">
                    <i class="fas fa-project-diagram"></i>
                    流程设计器 - 员工请假审批流程
                    <span style="font-size: 1rem; font-weight: normal; color: var(--text-secondary); margin-left: 10px;">v2.1</span>
                </div>
                <div class="actions">
                    <button class="btn btn-secondary">
                        <i class="fas fa-save"></i>
                        保存草稿
                    </button>
                    <button class="btn btn-primary">
                        <i class="fas fa-check-circle"></i>
                        发布流程
                    </button>
                </div>
            </div>
            
            <div class="designer-container">
                <div class="sidebar">
                    <div class="sidebar-section">
                        <div class="section-title">
                            <span>流程节点库</span>
                            <i class="fas fa-shapes"></i>
                        </div>
                        <div class="node-library">
                            <div class="node-item node-start" data-type="start">
                                <div class="node-icon">
                                    <i class="fas fa-play"></i>
                                </div>
                                <div class="node-name">开始节点</div>
                            </div>
                            <div class="node-item node-end" data-type="end">
                                <div class="node-icon">
                                    <i class="fas fa-stop"></i>
                                </div>
                                <div class="node-name">结束节点</div>
                            </div>
                            <div class="node-item node-user" data-type="user">
                                <div class="node-icon">
                                    <i class="fas fa-user-check"></i>
                                </div>
                                <div class="node-name">用户任务</div>
                            </div>
                            <div class="node-item node-auto" data-type="auto">
                                <div class="node-icon">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div class="node-name">自动任务</div>
                            </div>
                            <div class="node-item node-gateway" data-type="gateway">
                                <div class="node-icon">
                                    <i class="fas fa-code-branch"></i>
                                </div>
                                <div class="node-name">条件分支</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="sidebar-section">
                        <div class="section-title">
                            <span>流程模板</span>
                            <button class="btn btn-secondary" style="padding: 4px 10px; font-size: 0.8rem;">
                                <i class="fas fa-plus"></i>
                                新建
                            </button>
                        </div>
                        <div class="process-list">
                            <div class="process-item active">
                                <div class="process-info">
                                    <div class="process-name">员工请假审批</div>
                                    <div class="process-desc">员工提交请假申请后的审批流程</div>
                                </div>
                                <div style="font-size: 0.8rem; padding: 2px 8px; background-color: #d1fae5; color: #065f46; border-radius: 10px; font-weight: 500;">已启用</div>
                            </div>
                            <div class="process-item">
                                <div class="process-info">
                                    <div class="process-name">费用报销流程</div>
                                    <div class="process-desc">员工费用报销审批流程</div>
                                </div>
                                <div style="font-size: 0.8rem; padding: 2px 8px; background-color: #d1fae5; color: #065f46; border-radius: 10px; font-weight: 500;">已启用</div>
                            </div>
                            <div class="process-item">
                                <div class="process-info">
                                    <div class="process-name">采购申请流程</div>
                                    <div class="process-desc">公司采购申请审批流程</div>
                                </div>
                                <div style="font-size: 0.8rem; padding: 2px 8px; background-color: #d1fae5; color: #065f46; border-radius: 10px; font-weight: 500;">已启用</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="designer-area">
                    <svg id="connections-svg" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 5;">
                        <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8" />
                            </marker>
                        </defs>
                    </svg>
                    
                    <div class="designer-canvas" id="designer-canvas">
                        <!-- 流程节点将通过JS动态添加 -->
                    </div>
                </div>
                
                <div class="properties-panel">
                    <div style="padding: 20px; text-align: center; color: var(--text-secondary);">
                        <i class="fas fa-mouse-pointer" style="font-size: 2rem; margin-bottom: 10px;"></i>
                        <div style="font-weight: 600; margin-bottom: 5px;">未选中任何节点</div>
                        <div style="font-size: 0.9rem;">点击画布中的节点以查看和编辑其属性</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 统计报表 -->
        <div id="reports-tab" class="content-area">
            <div class="category-header">
                <div class="category-title">
                    <i class="fas fa-chart-line"></i>
                    工作流与待办任务统计报表
                    <span style="font-size: 1rem; font-weight: normal; color: var(--text-secondary); margin-left: 10px;">数据更新于: 2023年10月26日 14:30</span>
                </div>
                <div class="actions">
                    <select class="filter-dropdown">
                        <option selected>最近30天</option>
                        <option>最近7天</option>
                        <option>最近90天</option>
                        <option>自定义范围</option>
                    </select>
                    <button class="btn btn-primary">
                        <i class="fas fa-download"></i>
                        导出报表
                    </button>
                </div>
            </div>
            
            <div class="kpi-container">
                <div class="kpi-card">
                    <div class="kpi-header">
                        <div class="kpi-title">总任务数</div>
                        <div class="kpi-icon icon-primary">
                            <i class="fas fa-tasks"></i>
                        </div>
                    </div>
                    <div class="kpi-value">1,247</div>
                    <div class="kpi-change" style="color: var(--success-color);">
                        <i class="fas fa-arrow-up"></i>
                        <span>12.5% 较上月</span>
                    </div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-header">
                        <div class="kpi-title">平均处理时间</div>
                        <div class="kpi-icon icon-success">
                            <i class="fas fa-clock"></i>
                        </div>
                    </div>
                    <div class="kpi-value">4.2<span style="font-size: 1.2rem;">小时</span></div>
                    <div class="kpi-change" style="color: var(--danger-color);">
                        <i class="fas fa-arrow-down"></i>
                        <span>8.3% 较上月</span>
                    </div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-header">
                        <div class="kpi-title">流程完成率</div>
                        <div class="kpi-icon icon-warning">
                            <i class="fas fa-check-circle"></i>
                        </div>
                    </div>
                    <div class="kpi-value">94.7%</div>
                    <div class="kpi-change" style="color: var(--success-color);">
                        <i class="fas fa-arrow-up"></i>
                        <span>2.1% 较上月</span>
                    </div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-header">
                        <div class="kpi-title">超时率</div>
                        <div class="kpi-icon icon-danger">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                    </div>
                    <div class="kpi-value">3.2%</div>
                    <div class="kpi-change" style="color: var(--success-color);">
                        <i class="fas fa-arrow-down"></i>
                        <span>15.8% 较上月</span>
                    </div>
                </div>
            </div>
            
            <div class="chart-container">
                <div class="chart-card">
                    <div class="chart-header">
                        <div class="chart-title">任务量趋势</div>
                        <div class="chart-actions">
                            <button class="btn btn-secondary" style="padding: 6px 12px;">日</button>
                            <button class="btn btn-secondary" style="padding: 6px 12px;">周</button>
                            <button class="btn btn-secondary active" style="padding: 6px 12px;">月</button>
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="taskTrendChart"></canvas>
                    </div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-header">
                        <div class="chart-title">流程类型分布</div>
                        <div class="chart-actions">
                            <button class="btn btn-secondary active" style="padding: 6px 12px;">饼图</button>
                            <button class="btn btn-secondary" style="padding: 6px 12px;">柱状图</button>
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="processDistributionChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">流程效率分析</div>
                    <div class="table-actions">
                        <button class="btn btn-secondary">
                            <i class="fas fa-download"></i>
                            导出数据
                        </button>
                    </div>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>流程类型</th>
                            <th>平均处理时长</th>
                            <th>总任务数</th>
                            <th>完成率</th>
                            <th>超时率</th>
                            <th>平均节点数</th>
                            <th>效率评分</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="process-badge" style="background-color:#dbeafe; color:#1e40af;">请假审批</span></td>
                            <td>
                                <div>2.8 小时</div>
                                <div class="progress-bar">
                                    <div class="progress-fill progress-high" style="width: 40%;"></div>
                                </div>
                            </td>
                            <td>342</td>
                            <td>96.2%</td>
                            <td>2.1%</td>
                            <td>4.2</td>
                            <td><span class="process-badge" style="background-color:#d1fae5; color:#065f46;">优秀</span></td>
                        </tr>
                        <tr>
                            <td><span class="process-badge" style="background-color:#d1fae5; color:#065f46;">费用报销</span></td>
                            <td>
                                <div>3.5 小时</div>
                                <div class="progress-bar">
                                    <div class="progress-fill progress-high" style="width: 50%;"></div>
                                </div>
                            </td>
                            <td>298</td>
                            <td>94.7%</td>
                            <td>3.8%</td>
                            <td>5.1</td>
                            <td><span class="process-badge" style="background-color:#d1fae5; color:#065f46;">优秀</span></td>
                        </tr>
                        <tr>
                            <td><span class="process-badge" style="background-color:#fef3c7; color:#b45309;">采购申请</span></td>
                            <td>
                                <div>5.2 小时</div>
                                <div class="progress-bar">
                                    <div class="progress-fill progress-medium" style="width: 74%;"></div>
                                </div>
                            </td>
                            <td>215</td>
                            <td>92.1%</td>
                            <td>5.6%</td>
                            <td>6.3</td>
                            <td><span class="process-badge" style="background-color:#fef3c7; color:#b45309;">良好</span></td>
                        </tr>
                        <tr>
                            <td><span class="process-badge" style="background-color:#e0e7ff; color:#3730a3;">IT服务</span></td>
                            <td>
                                <div>4.8 小时</div>
                                <div class="progress-bar">
                                    <div class="progress-fill progress-medium" style="width: 68%;"></div>
                                </div>
                            </td>
                            <td>187</td>
                            <td>89.3%</td>
                            <td>7.2%</td>
                            <td>3.8</td>
                            <td><span class="process-badge" style="background-color:#fef3c7; color:#b45309;">良好</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- 团队协作 -->
        <div id="collaboration-tab" class="content-area">
            <div class="category-header">
                <div class="category-title">
                    <i class="fas fa-users"></i>
                    团队协作中心 - 新版本发布项目
                </div>
                <div class="actions">
                    <button class="btn btn-secondary">
                        <i class="fas fa-user-plus"></i>
                        邀请成员
                    </button>
                    <button class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        新建项目
                    </button>
                </div>
            </div>
            
            <div class="team-collab-container">
                <!-- 左侧面板 - 团队成员 -->
                <div class="left-panel">
                    <div class="panel-header">
                        <div class="panel-title">团队成员 (8)</div>
                        <div class="panel-actions">
                            <button class="btn btn-secondary btn-small">
                                <i class="fas fa-user-plus"></i>
                                邀请
                            </button>
                        </div>
                    </div>
                    <div class="panel-content">
                        <div class="member-list">
                            <div class="member-item active">
                                <div class="member-avatar" style="background-color: #2563eb;">
                                    张
                                </div>
                                <div class="member-info">
                                    <div class="member-name">张三</div>
                                    <div class="member-role">团队负责人 · 技术总监</div>
                                </div>
                            </div>
                            
                            <div class="member-item">
                                <div class="member-avatar" style="background-color: #10b981;">
                                    李
                                </div>
                                <div class="member-info">
                                    <div class="member-name">李四</div>
                                    <div class="member-role">前端开发工程师</div>
                                </div>
                            </div>
                            
                            <div class="member-item">
                                <div class="member-avatar" style="background-color: #f59e0b;">
                                    王
                                </div>
                                <div class="member-info">
                                    <div class="member-name">王五</div>
                                    <div class="member-role">后端开发工程师</div>
                                </div>
                            </div>
                            
                            <div class="member-item">
                                <div class="member-avatar" style="background-color: #8b5cf6;">
                                    赵
                                </div>
                                <div class="member-info">
                                    <div class="member-name">赵六</div>
                                    <div class="member-role">UI/UX设计师</div>
                                </div>
                            </div>
                            
                            <div class="member-item">
                                <div class="member-avatar" style="background-color: #ec4899;">
                                    孙
                                </div>
                                <div class="member-info">
                                    <div class="member-name">孙七</div>
                                    <div class="member-role">产品经理</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 中间面板 - 协作看板和聊天 -->
                <div class="center-panel">
                    <!-- 协作看板 -->
                    <div class="collab-kanban">
                        <div class="kanban-header">
                            <div class="kanban-title">
                                <i class="fas fa-project-diagram"></i>
                                团队协作看板 - 新版本发布
                            </div>
                            <div class="kanban-actions">
                                <button class="btn btn-secondary btn-small">
                                    <i class="fas fa-filter"></i>
                                    筛选
                                </button>
                                <button class="btn btn-primary btn-small">
                                    <i class="fas fa-plus"></i>
                                    新建任务
                                </button>
                            </div>
                        </div>
                        <div class="kanban-content">
                            <div class="kanban-column">
                                <div class="column-header">
                                    <div class="column-title">待处理</div>
                                    <div class="column-count">3</div>
                                </div>
                                
                                <div class="kanban-card" draggable="true">
                                    <div class="card-title">
                                        <span>用户登录页面优化</span>
                                        <span style="font-size: 0.8rem; background-color: #fef3c7; color: #b45309; padding: 2px 8px; border-radius: 12px;">设计</span>
                                    </div>
                                    <div class="card-description">优化登录页面的用户体验和视觉效果</div>
                                    <div class="card-footer">
                                        <div class="card-assignees">
                                            <div class="card-avatar">赵</div>
                                            <div class="card-avatar">李</div>
                                        </div>
                                        <div>3天前</div>
                                    </div>
                                </div>
                                
                                <div class="kanban-card" draggable="true">
                                    <div class="card-title">
                                        <span>API接口性能测试</span>
                                        <span style="font-size: 0.8rem; background-color: #dbeafe; color: #1e40af; padding: 2px 8px; border-radius: 12px;">测试</span>
                                    </div>
                                    <div class="card-description">对主要API接口进行压力测试和性能分析</div>
                                    <div class="card-footer">
                                        <div class="card-assignees">
                                            <div class="card-avatar">周</div>
                                        </div>
                                        <div>昨天</div>
                                    </div>
                                </div>
                                
                                <button class="add-card-btn">
                                    <i class="fas fa-plus"></i>
                                    添加任务
                                </button>
                            </div>
                            
                            <div class="kanban-column">
                                <div class="column-header">
                                    <div class="column-title">进行中</div>
                                    <div class="column-count">4</div>
                                </div>
                                
                                <div class="kanban-card" draggable="true">
                                    <div class="card-title">
                                        <span>移动端适配优化</span>
                                        <span style="font-size: 0.8rem; background-color: #fef3c7; color: #b45309; padding: 2px 8px; border-radius: 12px;">前端</span>
                                    </div>
                                    <div class="card-description">优化网站在移动设备上的显示效果</div>
                                    <div class="card-footer">
                                        <div class="card-assignees">
                                            <div class="card-avatar">李</div>
                                            <div class="card-avatar">王</div>
                                        </div>
                                        <div>进行中</div>
                                    </div>
                                </div>
                                
                                <div class="kanban-card" draggable="true">
                                    <div class="card-title">
                                        <span>支付模块重构</span>
                                        <span style="font-size: 0.8rem; background-color: #dbeafe; color: #1e40af; padding: 2px 8px; border-radius: 12px;">后端</span>
                                    </div>
                                    <div class="card-description">重构支付模块以提高稳定性和扩展性</div>
                                    <div class="card-footer">
                                        <div class="card-assignees">
                                            <div class="card-avatar">王</div>
                                        </div>
                                        <div>2天后到期</div>
                                    </div>
                                </div>
                                
                                <button class="add-card-btn">
                                    <i class="fas fa-plus"></i>
                                    添加任务
                                </button>
                            </div>
                            
                            <div class="kanban-column">
                                <div class="column-header">
                                    <div class="column-title">待审核</div>
                                    <div class="column-count">2</div>
                                </div>
                                
                                <div class="kanban-card" draggable="true">
                                    <div class="card-title">
                                        <span>安全漏洞修复</span>
                                        <span style="font-size: 0.8rem; background-color: #fee2e2; color: #b91c1c; padding: 2px 8px; border-radius: 12px;">安全</span>
                                    </div>
                                    <div class="card-description">修复发现的安全漏洞并进行测试</div>
                                    <div class="card-footer">
                                        <div class="card-assignees">
                                            <div class="card-avatar">吴</div>
                                            <div class="card-avatar">张</div>
                                        </div>
                                        <div>等待审核</div>
                                    </div>
                                </div>
                                
                                <button class="add-card-btn">
                                    <i class="fas fa-plus"></i>
                                    添加任务
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 团队聊天 -->
                    <div class="team-chat">
                        <div class="chat-header">
                            <div class="chat-title">
                                <i class="fas fa-comments"></i>
                                团队聊天 - 新版本发布
                                <span style="font-size: 0.9rem; font-weight: normal; color: var(--text-secondary);">(8人在线)</span>
                            </div>
                            <div class="chat-actions">
                                <button class="btn btn-secondary btn-small">
                                    <i class="fas fa-phone"></i>
                                    通话
                                </button>
                            </div>
                        </div>
                        <div class="chat-messages">
                            <div class="message-group">
                                <div class="message-item">
                                    <div class="message-avatar" style="background-color: #10b981;">李</div>
                                    <div class="message-content">
                                        <div class="message-header">
                                            <div class="message-sender">李四</div>
                                            <div class="message-time">10:25 AM</div>
                                        </div>
                                        <div class="message-bubble">
                                            移动端适配优化的进度如何了？有什么需要帮助的吗？
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="message-item own">
                                    <div class="message-avatar" style="background-color: #2563eb;">张</div>
                                    <div class="message-content">
                                        <div class="message-header">
                                            <div class="message-sender">张三</div>
                                            <div class="message-time">10:26 AM</div>
                                        </div>
                                        <div class="message-bubble">
                                            我正在处理，已经完成了80%。主要剩下一些细节调整和测试。
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="message-item">
                                    <div class="message-avatar" style="background-color: #f59e0b;">王</div>
                                    <div class="message-content">
                                        <div class="message-header">
                                            <div class="message-sender">王五</div>
                                            <div class="message-time">10:28 AM</div>
                                        </div>
                                        <div class="message-bubble">
                                            支付模块重构遇到了一个技术问题，可能需要延期一天。
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="chat-input-area">
                            <div class="chat-input-container">
                                <textarea class="chat-input" placeholder="输入消息... 使用@提及团队成员"></textarea>
                                <button class="chat-send-btn">
                                    <i class="fas fa-paper-plane"></i>
                                    发送
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 右侧面板 - 文件共享和活动 -->
                <div class="right-panel">
                    <!-- 文件共享 -->
                    <div class="file-sharing">
                        <div class="file-header">
                            <div class="file-title">
                                <i class="fas fa-folder-open"></i>
                                共享文件
                            </div>
                            <div class="file-actions">
                                <button class="btn btn-secondary btn-small">
                                    <i class="fas fa-upload"></i>
                                    上传
                                </button>
                            </div>
                        </div>
                        <div class="file-content">
                            <div class="file-item">
                                <div class="file-icon pdf">
                                    <i class="fas fa-file-pdf"></i>
                                </div>
                                <div class="file-info">
                                    <div class="file-name">新版本发布计划.pdf</div>
                                    <div class="file-meta">
                                        <div class="file-size">2.4 MB</div>
                                        <div>孙七 · 昨天</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="file-item">
                                <div class="file-icon doc">
                                    <i class="fas fa-file-word"></i>
                                </div>
                                <div class="file-info">
                                    <div class="file-name">API接口文档.docx</div>
                                    <div class="file-meta">
                                        <div class="file-size">1.8 MB</div>
                                        <div>王五 · 2天前</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="file-item">
                                <div class="file-icon xls">
                                    <i class="fas fa-file-excel"></i>
                                </div>
                                <div class="file-info">
                                    <div class="file-name">测试报告.xlsx</div>
                                    <div class="file-meta">
                                        <div class="file-size">3.2 MB</div>
                                        <div>周八 · 3天前</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="file-item">
                                <div class="file-icon img">
                                    <i class="fas fa-file-image"></i>
                                </div>
                                <div class="file-info">
                                    <div class="file-name">首页设计稿.png</div>
                                    <div class="file-meta">
                                        <div class="file-size">5.7 MB</div>
                                        <div>赵六 · 1周前</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 团队活动 -->
                    <div class="team-activity">
                        <div class="activity-header">
                            <div class="activity-title">
                                <i class="fas fa-history"></i>
                                团队活动
                            </div>
                        </div>
                        <div class="activity-content">
                            <div class="activity-item">
                                <div class="activity-avatar" style="background-color: #10b981;">李</div>
                                <div class="activity-content-details">
                                    <div class="activity-text">
                                        <span class="activity-user">李四</span> 将任务
                                        <span class="activity-target">移动端适配优化</span> 的状态更新为
                                        <span style="color: var(--success-color); font-weight: 600;">进行中</span>
                                    </div>
                                    <div class="activity-time">
                                        <i class="far fa-clock"></i>
                                        10分钟前
                                    </div>
                                </div>
                            </div>
                            
                            <div class="activity-item">
                                <div class="activity-avatar" style="background-color: #ec4899;">孙</div>
                                <div class="activity-content-details">
                                    <div class="activity-text">
                                        <span class="activity-user">孙七</span> 上传了新文件
                                        <span class="activity-target">新版本发布计划.pdf</span>
                                    </div>
                                    <div class="activity-time">
                                        <i class="far fa-clock"></i>
                                        1小时前
                                    </div>
                                </div>
                            </div>
                            
                            <div class="activity-item">
                                <div class="activity-avatar" style="background-color: #8b5cf6;">赵</div>
                                <div class="activity-content-details">
                                    <div class="activity-text">
                                        <span class="activity-user">赵六</span> 完成了任务
                                        <span class="activity-target">首页UI redesign</span>
                                    </div>
                                    <div class="activity-time">
                                        <i class="far fa-clock"></i>
                                        昨天
                                    </div>
                                </div>
                            </div>
                            
                            <div class="activity-item">
                                <div class="activity-avatar" style="background-color: #2563eb;">张</div>
                                <div class="activity-content-details">
                                    <div class="activity-text">
                                        <span class="activity-user">张三</span> 创建了新任务
                                        <span class="activity-target">数据库迁移方案设计</span>
                                        并分配给
                                        <span style="color: var(--primary-color); font-weight: 600;">吴九</span>
                                    </div>
                                    <div class="activity-time">
                                        <i class="far fa-clock"></i>
                                        昨天
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 任务详情模态框 -->
    <div class="modal" id="task-detail-modal">
        <div class="modal-content">
            <div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid var(--border-color);">
                <div style="font-size: 1.5rem; font-weight: 600;">任务详情 #IT-2023-0425</div>
                <button class="btn btn-secondary" id="detail-close">&times;</button>
            </div>
            
            <div style="padding: 20px 0;">
                <div style="font-size: 1.2rem; font-weight: 500; margin-bottom: 15px;">服务器宕机 - 主数据库服务器无响应</div>
                
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 25px;">
                    <div>
                        <div style="font-size: 0.9rem; color: var(--text-secondary);">优先级</div>
                        <div><span class="priority-badge priority-p0">P0 紧急</span></div>
                    </div>
                    <div>
                        <div style="font-size: 0.9rem; color: var(--text-secondary);">状态</div>
                        <div><span class="status-badge status-inprogress">处理中</span></div>
                    </div>
                    <div>
                        <div style="font-size: 0.9rem; color: var(--text-secondary);">负责人</div>
                        <div>张三</div>
                    </div>
                </div>
                
                <div style="margin-bottom: 25px;">
                    <div style="font-weight: 600; margin-bottom: 10px;">描述</div>
                    <div style="background-color: #f8fafc; padding: 15px; border-radius: 8px; line-height: 1.6;">
                        早上9:00开始，主数据库服务器无法连接，影响所有业务系统。<br>
                        错误代码: ORA-12541，初步判断为监听器故障。<br>
                        影响范围: 全公司网络中断，所有业务系统无法访问。
                    </div>
                </div>
                
                <div style="display: flex; gap: 10px; margin-top: 25px;">
                    <button class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        保存更改
                    </button>
                    <button class="btn btn-secondary">
                        <i class="fas fa-user-friends"></i>
                        转派任务
                    </button>
                    <button class="btn btn-secondary">
                        <i class="fas fa-exchange-alt"></i>
                        变更状态
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 全局变量
        let selectedNode = null;
        let nodes = [];
        let connections = [];
        let charts = {};
        let currentTaskView = 'priority';
        
        // 初始流程节点数据
        const initialNodes = [
            { id: 'node1', type: 'start', x: 100, y: 300, name: '开始', desc: '流程开始节点' },
            { id: 'node2', type: 'user', x: 300, y: 300, name: '提交申请', desc: '员工提交请假申请' },
            { id: 'node3', type: 'user', x: 500, y: 200, name: '直属经理审批', desc: '直属经理审批申请' },
            { id: 'node4', type: 'gateway', x: 700, y: 300, name: '条件分支', desc: '根据请假天数分支' },
            { id: 'node5', type: 'user', x: 900, y: 200, name: '部门总监审批', desc: '部门总监审批（>3天）' },
            { id: 'node6', type: 'user', x: 900, y: 400, name: 'HR备案', desc: 'HR备案请假记录' },
            { id: 'node7', type: 'auto', x: 1100, y: 300, name: '结束处理', desc: '发送通知，更新系统' },
            { id: 'node8', type: 'end', x: 1300, y: 300, name: '结束', desc: '流程结束节点' }
        ];
        
        const initialConnections = [
            { from: 'node1', to: 'node2' },
            { from: 'node2', to: 'node3' },
            { from: 'node3', to: 'node4' },
            { from: 'node4', to: 'node5', label: '请假天数 > 3' },
            { from: 'node4', to: 'node6', label: '请假天数 ≤ 3' },
            { from: 'node5', to: 'node7' },
            { from: 'node6', to: 'node7' },
            { from: 'node7', to: 'node8' }
        ];
        
        // DOM元素
        const mainTabs = document.querySelectorAll('.main-tab');
        const contentAreas = document.querySelectorAll('.content-area');
        const viewBtns = document.querySelectorAll('.view-btn');
        const taskViews = document.querySelectorAll('#tasks-tab .content-area');
        const designerCanvas = document.getElementById('designer-canvas');
        const connectionsSvg = document.getElementById('connections-svg');
        const taskDetailModal = document.getElementById('task-detail-modal');
        const detailClose = document.getElementById('detail-close');
        const quickActionCards = document.querySelectorAll('.quick-action-card');
        const taskRows = document.querySelectorAll('.task-row');
        const kanbanCards = document.querySelectorAll('.kanban-card');
        const kanbanColumns = document.querySelectorAll('.kanban-column');
        const nodeItems = document.querySelectorAll('.node-item');
        const memberItems = document.querySelectorAll('.member-item');
        const chatSendBtn = document.querySelector('.chat-send-btn');
        const chatInput = document.querySelector('.chat-input');
        
        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            initializeCharts();
            initializeDesigner();
            setupEventListeners();
            updateActiveTab('dashboard');
        });
        
        // 初始化图表
        function initializeCharts() {
            // 我的任务状态图
            const myTasksCtx = document.getElementById('myTasksChart').getContext('2d');
            charts.myTasks = new Chart(myTasksCtx, {
                type: 'doughnut',
                data: {
                    labels: ['待处理', '处理中', '待审核', '已完成'],
                    datasets: [{
                        data: [3, 1, 2, 6],
                        backgroundColor: [
                            '#e2e8f0',
                            '#dbeafe',
                            '#fef3c7',
                            '#d1fae5'
                        ],
                        borderWidth: 1,
                        borderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
            
            // 团队任务量趋势图
            const teamTasksCtx = document.getElementById('teamTasksChart').getContext('2d');
            charts.teamTasks = new Chart(teamTasksCtx, {
                type: 'line',
                data: {
                    labels: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
                    datasets: [
                        {
                            label: '创建任务',
                            data: [12, 15, 18, 14, 20, 8, 5],
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: '完成任务',
                            data: [10, 12, 15, 13, 18, 7, 4],
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // 任务量趋势图
            const taskTrendCtx = document.getElementById('taskTrendChart').getContext('2d');
            charts.taskTrend = new Chart(taskTrendCtx, {
                type: 'line',
                data: {
                    labels: ['10月20日', '10月21日', '10月22日', '10月23日', '10月24日', '10月25日', '10月26日'],
                    datasets: [
                        {
                            label: '创建任务',
                            data: [42, 38, 45, 52, 48, 56, 62],
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: '完成任务',
                            data: [38, 35, 40, 48, 45, 52, 58],
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // 流程类型分布图
            const processDistributionCtx = document.getElementById('processDistributionChart').getContext('2d');
            charts.processDistribution = new Chart(processDistributionCtx, {
                type: 'pie',
                data: {
                    labels: ['请假审批', '费用报销', '采购申请', 'IT服务', '合同审批'],
                    datasets: [{
                        data: [342, 298, 215, 187, 132],
                        backgroundColor: [
                            '#3b82f6',
                            '#10b981',
                            '#f59e0b',
                            '#8b5cf6',
                            '#ec4899'
                        ],
                        borderWidth: 1,
                        borderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }
        
        // 初始化设计器
        function initializeDesigner() {
            // 添加初始节点
            initialNodes.forEach(node => {
                addNodeToCanvas(node);
            });
            
            // 添加初始连接
            initialConnections.forEach(conn => {
                connections.push(conn);
            });
            
            // 渲染连接线
            renderConnections();
        }
        
        // 设置事件监听器
        function setupEventListeners() {
            // 主标签切换
            mainTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    updateActiveTab(tabId);
                    
                    // 更新活动标签样式
                    mainTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                });
            });
            
            // 视图切换（待办任务）
            viewBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const view = btn.getAttribute('data-view');
                    if (view) {
                        updateTaskView(view);
                        
                        // 更新活动视图按钮样式
                        document.querySelectorAll('#tasks-tab .view-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                    }
                });
            });
            
            // 快速操作卡片
            quickActionCards.forEach(card => {
                card.addEventListener('click', () => {
                    const action = card.getAttribute('data-action');
                    switch(action) {
                        case 'new-task':
                            alert('在实际系统中，这里会打开新建任务表单');
                            break;
                        case 'process-design':
                            updateActiveTab('process');
                            mainTabs.forEach(t => t.classList.remove('active'));
                            document.querySelector('[data-tab="process"]').classList.add('active');
                            break;
                        case 'view-reports':
                            updateActiveTab('reports');
                            mainTabs.forEach(t => t.classList.remove('active'));
                            document.querySelector('[data-tab="reports"]').classList.add('active');
                            break;
                        case 'team-collaboration':
                            updateActiveTab('collaboration');
                            mainTabs.forEach(t => t.classList.remove('active'));
                            document.querySelector('[data-tab="collaboration"]').classList.add('active');
                            break;
                    }
                });
            });
            
            // 任务详情查看
            taskRows.forEach(row => {
                row.addEventListener('click', (e) => {
                    if (e.target.tagName === 'INPUT' || e.target.closest('input')) {
                        return;
                    }
                    taskDetailModal.style.display = 'flex';
                });
            });
            
            // 关闭任务详情模态框
            detailClose.addEventListener('click', () => {
                taskDetailModal.style.display = 'none';
            });
            
            taskDetailModal.addEventListener('click', (e) => {
                if (e.target === taskDetailModal) {
                    taskDetailModal.style.display = 'none';
                }
            });
            
            // 看板拖拽功能
            setupKanbanDragAndDrop();
            
            // 节点库拖拽功能
            setupNodeLibraryDragAndDrop();
            
            // 成员选择
            setupMemberSelection();
            
            // 发送消息
            if (chatSendBtn) {
                chatSendBtn.addEventListener('click', sendMessage);
            }
            
            if (chatInput) {
                chatInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        sendMessage();
                    }
                });
            }
        }
        
        // 更新活动标签
        function updateActiveTab(tabId) {
            // 隐藏所有内容区域
            contentAreas.forEach(content => content.classList.remove('active'));
            
            // 显示选中的内容区域
            document.getElementById(`${tabId}-tab`).classList.add('active');
            
            // 如果是流程配置标签，重新渲染连接线
            if (tabId === 'process') {
                setTimeout(() => {
                    renderConnections();
                }, 100);
            }
            
            // 如果是统计报表标签，调整图表大小
            if (tabId === 'reports') {
                setTimeout(() => {
                    Object.values(charts).forEach(chart => {
                        if (chart) chart.resize();
                    });
                }, 100);
            }
        }
        
        // 更新任务视图
        function updateTaskView(view) {
            // 隐藏所有任务视图
            taskViews.forEach(view => view.classList.remove('active'));
            
            // 显示选中的视图
            document.getElementById(`${view}-view`).classList.add('active');
            currentTaskView = view;
        }
        
        // 设置看板拖拽功能
        function setupKanbanDragAndDrop() {
            let draggedCard = null;
            
            kanbanCards.forEach(card => {
                card.addEventListener('dragstart', () => {
                    draggedCard = card;
                    setTimeout(() => {
                        card.style.opacity = '0.4';
                    }, 0);
                });
                
                card.addEventListener('dragend', () => {
                    setTimeout(() => {
                        if (draggedCard) {
                            draggedCard.style.opacity = '1';
                            draggedCard = null;
                        }
                    }, 0);
                });
            });
            
            kanbanColumns.forEach(column => {
                column.addEventListener('dragover', (e) => {
                    e.preventDefault();
                });
                
                column.addEventListener('dragenter', (e) => {
                    e.preventDefault();
                    if (column !== draggedCard.parentElement) {
                        column.style.backgroundColor = '#e2e8f0';
                    }
                });
                
                column.addEventListener('dragleave', () => {
                    column.style.backgroundColor = '#f8fafc';
                });
                
                column.addEventListener('drop', () => {
                    column.style.backgroundColor = '#f8fafc';
                    if (draggedCard && column !== draggedCard.parentElement) {
                        column.insertBefore(draggedCard, column.querySelector('.add-card-btn'));
                        
                        // 更新列计数
                        updateKanbanColumnCounts();
                    }
                });
            });
        }
        
        // 设置节点库拖拽功能
        function setupNodeLibraryDragAndDrop() {
            nodeItems.forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', item.getAttribute('data-type'));
                    e.dataTransfer.effectAllowed = 'copy';
                });
            });
            
            if (designerCanvas) {
                designerCanvas.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    e.dataTransfer.dropEffect = 'copy';
                });
                
                designerCanvas.addEventListener('drop', (e) => {
                    e.preventDefault();
                    const nodeType = e.dataTransfer.getData('text/plain');
                    if (nodeType) {
                        const rect = designerCanvas.getBoundingClientRect();
                        const x = e.clientX - rect.left;
                        const y = e.clientY - rect.top;
                        
                        nodeCounter++;
                        const nodeId = 'new_node_' + nodeCounter;
                        
                        const newNode = {
                            id: nodeId,
                            type: nodeType,
                            x: x - 90,
                            y: y - 50,
                            name: getNodeDefaultName(nodeType),
                            desc: getNodeDefaultDesc(nodeType)
                        };
                        
                        addNodeToCanvas(newNode);
                    }
                });
            }
        }
        
        // 设置成员选择
        function setupMemberSelection() {
            memberItems.forEach(item => {
                item.addEventListener('click', () => {
                    // 移除所有成员的active类
                    memberItems.forEach(member => member.classList.remove('active'));
                    // 添加当前成员的active类
                    item.classList.add('active');
                    
                    // 在实际系统中，这里会加载该成员的详细信息
                    const memberName = item.querySelector('.member-name').textContent;
                    console.log(`选中了成员: ${memberName}`);
                });
            });
        }
        
        // 发送消息
        function sendMessage() {
            const message = chatInput.value.trim();
            if (message) {
                // 在实际系统中，这里会发送消息到服务器
                console.log(`发送消息: ${message}`);
                
                // 清空输入框
                chatInput.value = '';
                
                // 重置输入框高度
                chatInput.style.height = 'auto';
            }
        }
        
        // 添加节点到画布
        function addNodeToCanvas(nodeData) {
            const node = document.createElement('div');
            node.className = `flow-node node-${nodeData.type}`;
            node.id = nodeData.id;
            node.style.left = `${nodeData.x}px`;
            node.style.top = `${nodeData.y}px`;
            
            let iconClass = '';
            if (nodeData.type === 'start') iconClass = 'fas fa-play';
            else if (nodeData.type === 'end') iconClass = 'fas fa-stop';
            else if (nodeData.type === 'user') iconClass = 'fas fa-user-check';
            else if (nodeData.type === 'auto') iconClass = 'fas fa-robot';
            else if (nodeData.type === 'gateway') iconClass = 'fas fa-code-branch';
            else if (nodeData.type === 'subprocess') iconClass = 'fas fa-sitemap';
            
            node.innerHTML = `
                <div class="node-content">
                    <div class="node-header">
                        <div class="node-icon-small" style="background-color: ${getNodeColor(nodeData.type)}">
                            <i class="${iconClass}"></i>
                        </div>
                        <div class="node-title">${nodeData.name}</div>
                    </div>
                    <div class="node-body">${nodeData.desc}</div>
                </div>
            `;
            
            if (designerCanvas) {
                designerCanvas.appendChild(node);
                nodes.push({
                    ...nodeData,
                    element: node
                });
                
                // 添加节点事件监听
                node.addEventListener('click', (e) => {
                    e.stopPropagation();
                    selectNode(nodeData.id);
                });
            }
        }
        
        // 选择节点
        function selectNode(nodeId) {
            // 取消之前选择的节点
            if (selectedNode) {
                const prevNode = nodes.find(n => n.id === selectedNode);
                if (prevNode) {
                    prevNode.element.classList.remove('selected');
                }
            }
            
            // 选择新节点
            selectedNode = nodeId;
            const node = nodes.find(n => n.id === nodeId);
            if (node) {
                node.element.classList.add('selected');
            }
        }
        
        // 渲染连接线
        function renderConnections() {
            if (!connectionsSvg) return;
            
            // 清空现有连接线
            connectionsSvg.innerHTML = `
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8" />
                    </marker>
                </defs>
            `;
            
            // 绘制每条连接线
            connections.forEach(conn => {
                const fromNode = nodes.find(n => n.id === conn.from);
                const toNode = nodes.find(n => n.id === conn.to);
                
                if (fromNode && toNode) {
                    const fromX = fromNode.x + 90;
                    const fromY = fromNode.y + 50;
                    const toX = toNode.x;
                    const toY = toNode.y + 50;
                    
                    // 计算控制点以创建曲线
                    const controlX1 = fromX + (toX - fromX) / 2;
                    const controlY1 = fromY;
                    const controlX2 = fromX + (toX - fromX) / 2;
                    const controlY2 = toY;
                    
                    // 创建路径
                    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                    path.setAttribute('d', `M ${fromX} ${fromY} C ${controlX1} ${controlY1}, ${controlX2} ${controlY2}, ${toX} ${toY}`);
                    path.setAttribute('class', 'connection-line');
                    path.setAttribute('stroke', '#94a3b8');
                    path.setAttribute('stroke-width', '2');
                    path.setAttribute('fill', 'none');
                    path.setAttribute('marker-end', 'url(#arrowhead)');
                    
                    // 添加标签（如果有）
                    if (conn.label) {
                        const labelX = (fromX + toX) / 2;
                        const labelY = (fromY + toY) / 2 - 10;
                        
                        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                        text.setAttribute('x', labelX);
                        text.setAttribute('y', labelY);
                        text.setAttribute('text-anchor', 'middle');
                        text.setAttribute('font-size', '12');
                        text.setAttribute('fill', '#475569');
                        text.setAttribute('style', 'pointer-events: none;');
                        text.textContent = conn.label;
                        
                        connectionsSvg.appendChild(text);
                    }
                    
                    connectionsSvg.appendChild(path);
                }
            });
        }
        
        // 更新看板列计数
        function updateKanbanColumnCounts() {
            const kanbanColumns = document.querySelectorAll('.kanban-column');
            kanbanColumns.forEach(column => {
                const count = column.querySelectorAll('.kanban-card').length;
                const countElement = column.querySelector('.kanban-count');
                if (countElement) {
                    countElement.textContent = count;
                }
            });
        }
        
        // 获取节点默认名称
        function getNodeDefaultName(type) {
            switch(type) {
                case 'start': return '开始';
                case 'end': return '结束';
                case 'user': return '用户任务';
                case 'auto': return '自动任务';
                case 'gateway': return '条件分支';
                case 'subprocess': return '子流程';
                default: return '未命名节点';
            }
        }
        
        // 获取节点默认描述
        function getNodeDefaultDesc(type) {
            switch(type) {
                case 'start': return '流程开始节点';
                case 'end': return '流程结束节点';
                case 'user': return '需要人工处理的任务';
                case 'auto': return '系统自动执行的任务';
                case 'gateway': return '根据条件决定流程走向';
                case 'subprocess': return '调用其他子流程';
                default: return '流程节点';
            }
        }
        
        // 获取节点颜色
        function getNodeColor(type) {
            switch(type) {
                case 'start': return 'var(--node-start)';
                case 'end': return 'var(--node-end)';
                case 'user': return 'var(--node-user)';
                case 'auto': return 'var(--node-auto)';
                case 'gateway': return 'var(--node-gateway)';
                case 'subprocess': return 'var(--node-subprocess)';
                default: return 'var(--primary-color)';
            }
        }
        
        // 全局变量
        let nodeCounter = 8; // 从初始节点数开始
        
        // 自动调整输入框高度
        if (chatInput) {
            chatInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 120) + 'px';
            });
        }
        
        // 添加键盘快捷键
        document.addEventListener('keydown', (e) => {
            // 按F5刷新页面
            if (e.key === 'F5') {
                e.preventDefault();
                location.reload();
            }
            
            // 按ESC关闭模态框
            if (e.key === 'Escape') {
                taskDetailModal.style.display = 'none';
            }
            
            // 按数字键1-5切换主标签
            if (e.key >= '1' && e.key <= '5' && !e.ctrlKey && !e.altKey && !e.metaKey) {
                const tabIndex = parseInt(e.key) - 1;
                const tabs = Array.from(mainTabs);
                if (tabIndex < tabs.length) {
                    tabs[tabIndex].click();
                }
            }
        });
    </script>
</body>
</html>